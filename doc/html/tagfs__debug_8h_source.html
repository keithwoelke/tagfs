<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TagFS: src/tagfs_debug.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>src/tagfs_debug.h</h1>  </div>
</div>
<div class="contents">
<a href="tagfs__debug_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00008"></a>00008 <span class="preprocessor">#ifndef TAGFS_DEBUG_H</span>
<a name="l00009"></a>00009 <span class="preprocessor"></span><span class="preprocessor">#define TAGFS_DEBUG_H</span>
<a name="l00010"></a>00010 <span class="preprocessor"></span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &quot;<a class="code" href="tagfs__params_8h.html" title="TagFS parameters and global settings.">tagfs_params.h</a>&quot;</span>
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 <span class="preprocessor">#include &lt;assert.h&gt;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &lt;pthread.h&gt;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &lt;semaphore.h&gt;</span>
<a name="l00016"></a>00016 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00017"></a>00017 
<a name="l00018"></a>00018 <span class="preprocessor">#define INFO(...) debug_wait(); fprintf(TAGFS_DATA-&gt;logfile, &quot;%u: &quot;, (unsigned int)pthread_self()); fprintf(TAGFS_DATA-&gt;logfile, __VA_ARGS__); fprintf(TAGFS_DATA-&gt;logfile, &quot;\n&quot;); fflush(TAGFS_DATA-&gt;logfile); debug_post()</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span>
<a name="l00020"></a>00020 <span class="preprocessor">#define DEBUG(...) debug_wait(); fprintf(TAGFS_DATA-&gt;logfile, &quot;%u: DEBUG: &quot;, (unsigned int)pthread_self()); fprintf(TAGFS_DATA-&gt;logfile, __VA_ARGS__); fprintf(TAGFS_DATA-&gt;logfile, &quot;\n&quot;); fflush(TAGFS_DATA-&gt;logfile); debug_post()</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span>
<a name="l00022"></a>00022 <span class="preprocessor">#define WARN(...) debug_wait(); fprintf(TAGFS_DATA-&gt;logfile, &quot;%u: WARNING: &quot;, (unsigned int)pthread_self()); fprintf(TAGFS_DATA-&gt;logfile, __VA_ARGS__); fprintf(TAGFS_DATA-&gt;logfile, &quot;\n&quot;); fflush(TAGFS_DATA-&gt;logfile); debug_post()</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span>
<a name="l00024"></a>00024 <span class="preprocessor">#define ERROR(...) debug_wait(); fprintf(TAGFS_DATA-&gt;logfile, &quot;%u: %s(%d): ERROR: &quot;, (unsigned int)pthread_self(), __FILE__, __LINE__); fprintf(TAGFS_DATA-&gt;logfile, __VA_ARGS__); fprintf(TAGFS_DATA-&gt;logfile, &quot;\n&quot;); fflush(TAGFS_DATA-&gt;logfile); debug_post(); exit(EXIT_FAILURE)</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span>
<a name="l00032"></a>00032 FILE *debug_open_log(<span class="keywordtype">char</span> *full_log_path);
<a name="l00033"></a>00033 
<a name="l00039"></a>00039 <span class="keywordtype">void</span> debug_close_log(FILE *logfile);
<a name="l00040"></a>00040 
<a name="l00044"></a>00044 <span class="keywordtype">void</span> debug_init();
<a name="l00045"></a>00045 
<a name="l00049"></a>00049 <span class="keywordtype">void</span> debug_wait();
<a name="l00050"></a>00050 
<a name="l00054"></a>00054 <span class="keywordtype">void</span> debug_post();
<a name="l00055"></a>00055 
<a name="l00056"></a>00056 
<a name="l00057"></a>00057 
<a name="l00058"></a>00058 
<a name="l00059"></a>00059 
<a name="l00061"></a>00061 <span class="comment">//#define D_LEVEL_NONE                  0x00</span>
<a name="l00062"></a>00062 <span class="comment">//#define D_LEVEL_INFORMATIONAL         0x01</span>
<a name="l00063"></a>00063 <span class="comment">//#define D_LEVEL_DEBUG                 0x02</span>
<a name="l00064"></a>00064 <span class="comment">//#define D_LEVEL_WARNING                       0x04</span>
<a name="l00065"></a>00065 <span class="comment">//#define D_LEVEL_ERROR                 0x08</span>
<a name="l00066"></a>00066 <span class="comment">//#define D_LEVEL_ENTRY                 0x10</span>
<a name="l00067"></a>00067 <span class="comment">//#define D_LEVEL_EXIT                  0x20</span>
<a name="l00068"></a>00068 <span class="comment">//#define D_LEVEL_FOLDER_CONTENTS               0x40</span>
<a name="l00069"></a>00069 <span class="comment">//</span>
<a name="l00071"></a>00071 <span class="comment"></span><span class="comment">//#define DEBUG_LEVEL_NONE              D_LEVEL_NONE</span>
<a name="l00072"></a>00072 <span class="comment">//#define DEBUG_LEVEL_INFORMATIONAL     (D_LEVEL_INFORMATIONAL | D_LEVEL_WARNING | D_LEVEL_ERROR)</span>
<a name="l00073"></a>00073 <span class="comment">//#define DEBUG_LEVEL_VERBOSE           (D_LEVEL_INFORMATIONAL | D_LEVEL_DEBUG | D_LEVEL_WARNING | D_LEVEL_ERROR | D_LEVEL_ENTRY | D_LEVEL_EXIT)</span>
<a name="l00074"></a>00074 <span class="comment">//#define DEBUG_LEVEL_ALL                       (D_LEVEL_INFORMATIONAL | D_LEVEL_DEBUG | D_LEVEL_WARNING | D_LEVEL_ERROR | D_LEVEL_ENTRY | D_LEVEL_EXIT | D_LEVEL_FOLDER_CONTENTS)</span>
<a name="l00075"></a>00075 <span class="comment">//</span>
<a name="l00077"></a>00077 <span class="comment"></span><span class="comment">//#define DEBUG_LEVEL   DEBUG_LEVEL_ALL</span>
<a name="l00078"></a>00078 <span class="comment">//</span>
<a name="l00080"></a>00080 <span class="comment"></span><span class="comment">//#define D_FILE_NONE           0x0FFFFFF</span>
<a name="l00081"></a>00081 <span class="comment">//#define D_FILE_TAGFS_COMMON   0x1000000</span>
<a name="l00082"></a>00082 <span class="comment">//#define D_FILE_TAGFS_DB               0x2000000</span>
<a name="l00083"></a>00083 <span class="comment">//</span>
<a name="l00085"></a>00085 <span class="comment"></span><span class="comment">//#define DEBUG_FILE_NONE               D_FILE_NONE</span>
<a name="l00086"></a>00086 <span class="comment">//#define DEBUG_FILE_SANE               (D_FILE_TAGFS_COMMON | D_FILE_TAGFS_DB)</span>
<a name="l00087"></a>00087 <span class="comment">//#define DEBUG_FILE_ALL                (D_FILE_TAGFS_COMMON | D_FILE_TAGFS_DB)</span>
<a name="l00088"></a>00088 <span class="comment">//</span>
<a name="l00090"></a>00090 <span class="comment"></span><span class="comment">//#define DEBUG_FILE    DEBUG_FILE_SANE</span>
<a name="l00091"></a>00091 <span class="comment">//</span>
<a name="l00093"></a>00093 <span class="comment"></span><span class="comment">//#define D_FUNCTION_GET_FILE_DIRECTORY                 (0x0000001 | D_FILE_TAGFS_COMMON)</span>
<a name="l00094"></a>00094 <span class="comment">//#define D_FUNCTION_FREE_CHAR_PTR_ARRAY                        (0x0000002 | D_FILE_TAGFS_COMMON)</span>
<a name="l00095"></a>00095 <span class="comment">//#define D_FUNCTION_PATH_TO_ARRAY                      (0x0000004 | D_FILE_TAGFS_COMMON)</span>
<a name="l00096"></a>00096 <span class="comment">//#define D_FUNCTION_NUM_TAGS_IN_PATH                   (0x0000008 | D_FILE_TAGFS_COMMON)</span>
<a name="l00097"></a>00097 <span class="comment">//#define D_FUNCTION_ARRAY_CONTAINS_STRING              (0x0000010 | D_FILE_TAGFS_COMMON)</span>
<a name="l00098"></a>00098 <span class="comment">//#define D_FUNCTION_VALID_PATH_TO_FILE                 (0x0000020 | D_FILE_TAGFS_COMMON)</span>
<a name="l00099"></a>00099 <span class="comment">//#define D_FUNCTION_UNIQUE_TAGS_IN_PATH                        (0x0000040 | D_FILE_TAGFS_COMMON)</span>
<a name="l00100"></a>00100 <span class="comment">//#define D_FUNCTION_VALID_PATH_TO_TAG                  (0x0000080 | D_FILE_TAGFS_COMMON)</span>
<a name="l00101"></a>00101 <span class="comment">//#define D_FUNCTION_NUM_DIGITS                         (0x0000100 | D_FILE_TAGFS_COMMON)</span>
<a name="l00102"></a>00102 <span class="comment">//</span>
<a name="l00103"></a>00103 <span class="comment">//#define D_FUNCTION_DB_ENABLE_FOREIGN_KEYS             (0x0000200 | D_FILE_TAGFS_DB)</span>
<a name="l00104"></a>00104 <span class="comment">//#define D_FUNCTION_DB_CONNECT                         (0x0000400 | D_FILE_TAGFS_DB)</span>
<a name="l00105"></a>00105 <span class="comment">//#define D_FUNCTION_DB_DISCONNECT                      (0x0000800 | D_FILE_TAGFS_DB)</span>
<a name="l00106"></a>00106 <span class="comment">//#define D_FUNCTION_DB_COUNT_FROM_QUERY                        (0x0001000 | D_FILE_TAGFS_DB)</span>
<a name="l00107"></a>00107 <span class="comment">//#define D_FUNCTION_DB_ARRAY_FROM_QUERY                        (0x0002000 | D_FILE_TAGFS_DB)</span>
<a name="l00108"></a>00108 <span class="comment">//#define D_FUNCTION_DB_BUILD_FILE_QUERY                        (0x0004000 | D_FILE_TAGFS_DB)</span>
<a name="l00109"></a>00109 <span class="comment">//#define D_FUNCTION_DB_BUILD_RESTRICTED_FILE_QUERY     (0x0008000 | D_FILE_TAGFS_DB)</span>
<a name="l00110"></a>00110 <span class="comment">//#define D_FUNCTION_DB_BUILD_TAG_QUERY                 (0x0010000 | D_FILE_TAGFS_DB)</span>
<a name="l00111"></a>00111 <span class="comment">//#define D_FUNCTION_DB_BUILD_RESTRICTED_TAG_QUERY      (0x0020000 | D_FILE_TAGFS_DB)</span>
<a name="l00112"></a>00112 <span class="comment">//#define D_FUNCTION_DB_FILES_FROM_QUERY                        (0x0040000 | D_FILE_TAGFS_DB)</span>
<a name="l00113"></a>00113 <span class="comment">//#define D_FUNCTION_DB_TAGS_FROM_QUERY                 (0x0080000 | D_FILE_TAGFS_DB)</span>
<a name="l00114"></a>00114 <span class="comment">//#define D_FUNCTION_DB_DELETE_FILE                     (0x0100000 | D_FILE_TAGFS_DB)</span>
<a name="l00115"></a>00115 <span class="comment">//#define D_FUNCTION_DB_GET_FILE_ID                     (0x0200000 | D_FILE_TAGFS_DB)</span>
<a name="l00116"></a>00116 <span class="comment">//#define D_FUNCTION_DB_GET_FILE_LOCATION                       (0x0400000 | D_FILE_TAGFS_DB)</span>
<a name="l00117"></a>00117 <span class="comment">//</span>
<a name="l00120"></a>00120 <span class="comment"></span><span class="comment">//#define DEBUG_FUNCTION_TAGFS_COMMON_SANE      (D_FUNCTION_GET_FILE_DIRECTORY | D_FUNCTION_PATH_TO_ARRAY | D_FUNCTION_NUM_TAGS_IN_PATH | D_FUNCTION_ARRAY_CONTAINS_STRING | D_FUNCTION_VALID_PATH_TO_FILE | D_FUNCTION_UNIQUE_TAGS_IN_PATH | D_FUNCTION_VALID_PATH_TO_TAG | D_FUNCTION_NUM_DIGITS)</span>
<a name="l00121"></a>00121 <span class="comment">//#define DEBUG_FUNCTION_TAGFS_COMMON_ALL               (D_FUNCTION_GET_FILE_DIRECTORY | D_FUNCTION_FREE_CHAR_PTR_ARRAY | D_FUNCTION_PATH_TO_ARRAY | D_FUNCTION_NUM_TAGS_IN_PATH | D_FUNCTION_ARRAY_CONTAINS_STRING | D_FUNCTION_VALID_PATH_TO_FILE | D_FUNCTION_UNIQUE_TAGS_IN_PATH | D_FUNCTION_VALID_PATH_TO_TAG | D_FUNCTION_NUM_DIGITS)</span>
<a name="l00122"></a>00122 <span class="comment">//</span>
<a name="l00124"></a>00124 <span class="comment"></span><span class="comment">//#define DEBUG_FUNCTION_TAGFS_DB_SANE          (D_FUNCTION_DB_COUNT_FROM_QUERY | D_FUNCTION_DB_ARRAY_FROM_QUERY | D_FUNCTION_DB_BUILD_FILE_QUERY | D_FUNCTION_DB_BUILD_RESTRICTED_FILE_QUERY | D_FUNCTION_DB_BUILD_TAG_QUERY | D_FUNCTION_DB_BUILD_RESTRICTED_TAG_QUERY | D_FUNCTION_DB_FILES_FROM_QUERY | D_FUNCTION_DB_TAGS_FROM_QUERY | D_FUNCTION_DB_DELETE_FILE | D_FUNCTION_DB_GET_FILE_ID | D_FUNCTION_DB_GET_FILE_LOCATION)</span>
<a name="l00125"></a>00125 <span class="comment">//#define DEBUG_FUNCTION_TAGFS_DB_ALL           (D_FUNCTION_DB_ENABLE_FOREIGN_KEYS | D_FUNCTION_DB_CONNECT | D_FUNCTION_DB_DISCONNECT | D_FUNCTION_DB_COUNT_FROM_QUERY | D_FUNCTION_DB_ARRAY_FROM_QUERY | D_FUNCTION_DB_BUILD_FILE_QUERY | D_FUNCTION_DB_BUILD_RESTRICTED_FILE_QUERY | D_FUNCTION_DB_BUILD_TAG_QUERY | D_FUNCTION_DB_BUILD_RESTRICTED_TAG_QUERY | D_FUNCTION_DB_FILES_FROM_QUERY | D_FUNCTION_DB_TAGS_FROM_QUERY | D_FUNCTION_DB_DELETE_FILE | D_FUNCTION_DB_GET_FILE_ID | D_FUNCTION_DB_GET_FILE_LOCATION)</span>
<a name="l00126"></a>00126 <span class="comment">//</span>
<a name="l00128"></a>00128 <span class="comment"></span><span class="comment">//#define DEBUG_FUNCTION                                (DEBUG_FUNCTION_TAGFS_COMMON_SANE | DEBUG_FUNCTION_TAGFS_DB_SANE)</span>
<a name="l00129"></a>00129 <span class="comment">//</span>
<a name="l00131"></a>00131 <span class="comment"></span><span class="comment">//#define DEBUG_PATH                            (DEBUG_FILE | (D_FILE_NONE &amp; DEBUG_FUNCTION))</span>
<a name="l00132"></a>00132 <span class="comment">//</span>
<a name="l00134"></a>00134 <span class="comment"></span><span class="comment">// * Identical to the standand printf.</span>
<a name="l00135"></a>00135 <span class="comment">// * @param format String that contains the text to be written to stderr. It can optionally contain embedded format tags that are substituted by the values specified in subsequent argument(s). In this respect, the function is identical to printf, but outputs to stderr instead.</span>
<a name="l00136"></a>00136 <span class="comment">// * @param additional Depending on the format string, the function may expect a sequence of additional arguments, each containing one value to be inserted instead of each %-tag specified in the format parameter, if any. There should be the same number of these arguments as the number of %-tags that expect a value.</span>
<a name="l00137"></a>00137 <span class="comment">// * @return On success, the total number of characters written. On failure, a negative number is returned.</span>
<a name="l00138"></a>00138 <span class="comment">// */</span>
<a name="l00139"></a>00139 <span class="comment">//void DEBUG(int function, int msg_level, const char *format, ...);</span>
<a name="l00140"></a>00140 
<a name="l00141"></a>00141 
<a name="l00142"></a>00142 <span class="preprocessor">#endif</span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Sat Jan 22 2011 14:40:00 for TagFS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
